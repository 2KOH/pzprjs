/*! @license pzpr.js v3.4.0-pre (c) 2009-2014 sabo2, MIT license
 *   https://bitbucket.org/sabo2/pzprv3 */
pzpr.createCustoms("numlin",{MouseEvent:{mouseinput:function(){this.owner.playmode?this.btn.Left?this.mousestart||this.mousemove?this.inputLine():this.mouseend&&this.notInputted()&&this.inputpeke():this.btn.Right&&(this.mousestart||this.mousemove)&&this.inputpeke():this.owner.editmode&&this.mousestart&&this.inputqnum()},inputRed:function(){this.dispRedLine()}},KeyEvent:{enablemake:!0},Board:{isborder:1},LineManager:{isCenterLine:!0},AreaLineManager:{enabled:!0},Flags:{redline:!0},Graphic:{initialize:function(){this.Common.prototype.initialize.call(this),this.gridcolor=this.gridcolor_LIGHT},paint:function(){this.drawBGCells(),this.drawGrid(),this.drawPekes(),this.drawLines(),this.drawCellSquare(),this.drawNumbers(),this.drawChassis(),this.drawTarget()},drawCellSquare:function(){for(var a=this.vinc("cell_number_base","crispEdges"),b=.7*this.bw-1,c=.7*this.bh-1,d="c_sq_",e=this.range.cells,f=0;f<e.length;f++){var g=e[f];if(-1!==g.qnum){if(a.fillStyle=1===g.error?this.errbcolor1:"white",this.vnop(d+g.id,this.FILL)){var h=g.bx*this.bw,i=g.by*this.bh;a.fillRect(h-b,i-c,2*b+1,2*c+1)}}else this.vhide(d+g.id)}}},Encode:{decodePzpr:function(){this.decodeNumber16()},encodePzpr:function(){this.encodeNumber16()},decodeKanpen:function(){this.owner.fio.decodeCellQnum_kanpen()},encodeKanpen:function(){this.owner.fio.encodeCellQnum_kanpen()}},FileIO:{decodeData:function(){this.decodeCellQnum(),this.decodeBorderLine()},encodeData:function(){this.encodeCellQnum(),this.encodeBorderLine()},kanpenOpen:function(){this.decodeCellQnum_kanpen(),this.decodeBorderLine()},kanpenSave:function(){this.encodeCellQnum_kanpen(),this.encodeBorderLine()}},AnsCheck:{checkAns:function(){if(!this.checkLineCount(3))return"lnBranch";if(!this.checkLineCount(4))return"lnCross";var a=this.owner.board.getLareaInfo();return this.checkTripleObject(a)?this.checkLinkDiffNumber(a)?this.checkLineOverLetter()?this.checkDeadendLine()?this.checkDisconnectLine(a)?this.checkAloneNumber()?null:"nmIsolate":"lcIsolate":"lcDeadEnd":"lcOnNum":"nmConnDiff":"lcTripleNum"},checkLinkDiffNumber:function(a){return this.checkSameObjectInRoom(a,function(a){return a.getNum()})},checkAloneNumber:function(){return this.checkAllCell(function(a){return 0===a.lcnt()&&a.isNum()})},checkDeadendLine:function(){for(var a=!0,b=this.owner.board,c=0;c<b.cellmax;c++){var d=b.cell[c];if(1===d.lcnt()&&d.noNum()){if(this.checkOnly)return!1;a&&b.border.seterr(-1),d.setCellLineError(!0),a=!1}}return a}},FailCode:{nmConnDiff:["異なる数字がつながっています。","Different numbers are connected."]}});