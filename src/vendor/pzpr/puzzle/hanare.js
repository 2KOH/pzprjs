/*! @license pzpr.js v3.4.0-pre (c) 2009-2014 sabo2, MIT license
 *   https://bitbucket.org/sabo2/pzprv3 */
pzpr.createCustoms("hanare",{MouseEvent:{mouseinput:function(){this.owner.playmode?this.btn.Left?this.mousestart?this.inputqnum_hanare():this.mousemove&&this.inputDot():this.btn.Right&&(this.mousestart||this.mousemove)&&this.inputDot():this.owner.editmode&&(this.mousestart||this.mousemove?this.inputborder():this.mouseend&&this.notInputted()&&this.inputqnum_hanare())},inputqnum_hanare:function(){var a=this.getcell();if(!a.isnull&&a!==this.mouseCell){var b=a.setNum_hanare(1);null!==b&&(this.inputData=-1===b?0:1,this.mouseCell=a,a.draw())}},inputDot:function(){var a=this.getcell();a.isnull||a===this.mouseCell||-1!==a.getQnum()||(null===this.inputData&&(this.inputData=1===a.getQsub()?0:1),a.setAnum(-1),a.setQsub(1===this.inputData?1:0),this.mouseCell=a,a.draw())}},KeyEvent:{enablemake:!0,enableplay:!0,keyinput:function(a){this.key_inputqnum_hanare(a)},key_inputqnum_hanare:function(a){var b=this.cursor.getTCC(),c=-1;if(a>="0"&&"9">=a)c=1;else if("-"===a)c=this.owner.playmode?-2:-1;else{if(" "!==a)return;c=-1}b.setNum_hanare(c),this.prev=b,b.draw()}},Cell:{setNum_hanare:function(a){if(a>=0){var b=this.owner,c=b.board.rooms;if(a=c.getCntOfRoomByCell(this),a>this.maxnum)return null;for(var d=c.getClistByCell(this),e=null,f=0;f<d.length;f++)if(d[f].isNum()){e=d[f];break}if(this===e)a=b.playmode?-2:-1;else if(null!==e){if(b.playmode&&-1!==e.qnum)return null;e.setNum(b.playmode?-2:-1),e.draw()}else 1===this.qsub&&(a=-1)}return this.setNum(a),a}},Board:{qcols:8,qrows:8,isborder:1},AreaRoomManager:{enabled:!0},Graphic:{initialize:function(){this.Common.prototype.initialize.call(this),this.gridcolor=this.gridcolor_DLIGHT,this.dotcolor=this.dotcolor_PINK},paint:function(){this.drawBGCells(),this.drawGrid(),this.drawDotCells(!0),this.drawNumbers(),this.drawBorders(),this.drawChassis(),this.drawCursor()}},Encode:{decodePzpr:function(){this.decodeBorder(),this.decodeNumber16()},encodePzpr:function(){this.encodeBorder(),this.encodeNumber16()}},FileIO:{decodeData:function(){this.decodeBorderQues(),this.decodeCellQnum(),this.decodeCellAnumsub()},encodeData:function(){this.encodeBorderQues(),this.encodeCellQnum(),this.encodeCellAnumsub()}},AnsCheck:{checkAns:function(){var a=this.owner.board.getRoomInfo();return this.checkDoubleNumber(a)?this.checkAnsNumberAndSize(a)?this.checkDiffNumber()?this.checkNoNumber(a)?null:"bkNoNum":"nmDiffDistNe":"bkSizeNe":"bkNumGe2"},checkDiffNumber:function(){function a(a){if(g++,a.isNum())if(a.isValidNum(a)){if(null!==h&&Math.abs(f-a.getNum())!==g){if(this.checkOnly)return!1;h.seterr(1),a.seterr(1),b=!1}h=a,f=a.getNum(),g=-1}else c=null;else;}for(var b=!0,d=this.owner.board,e=d.minbx+1;e<=d.maxbx-1;e+=2)for(var f,g,h=null,i=d.minby+1;i<=d.maxby-1;i+=2)a(d.getc(e,i));for(var i=d.minby+1;i<=d.maxby-1;i+=2)for(var f,g,h=null,e=d.minbx+1;e<=d.maxbx-1;e+=2)a(d.getc(e,i));return b},checkAnsNumberAndSize:function(a){for(var b=!0,c=1;c<=a.max;c++){for(var d=a.room[c].clist,e=-1,f=0;f<d.length;f++)if(d[f].isNum()){e=d[f].getNum();break}if(-1!==e&&e!==d.length){if(this.checkOnly)return!1;d.seterr(1),b=!1}}return b}},FailCode:{bkNoNum:["数字の入っていない部屋があります。","A room has no numbers."],bkNumGe2:["1つの部屋に2つ以上の数字が入っています。","A room has plural numbers."],bkSizeNe:["数字と部屋の大きさが違います。","The size of the room is not equal to the number."],nmDiffDistNe:["２つの数字の差とその間隔が正しくありません。","The distance of the paired numbers is not equal to the diff of them."]}});