/*! @license pzpr.js v3.4.0-pre (c) 2009-2014 sabo2, MIT license
 *   https://bitbucket.org/sabo2/pzprv3 */
pzpr.createCustoms("nurikabe",{MouseEvent:{mouseinput:function(){this.owner.playmode?(this.mousestart||this.mousemove)&&this.inputcell():this.owner.editmode&&this.mousestart&&this.inputqnum()}},"MouseEvent@nurikabe":{inputRed:function(){this.dispRed()}},KeyEvent:{enablemake:!0},Cell:{numberIsWhite:!0},Board:{getdir8WareaInfo:function(){for(var a=new this.owner.AreaInfo,b=0;b<this.cellmax;b++)a.id[b]=this.cell[b].isWhite()?0:null;for(var b=0;b<this.cellmax;b++)if(a.emptyCell(this.cell[b])){a.addRoom();for(var c=[this.cell[b]];c.length>0;){var d=c.pop();if(a.emptyCell(d)){a.addCell(d);for(var e=d.bx,f=d.by,g=this.cellinside(e-2,f-2,e+2,f+2),h=0;h<g.length;h++)a.emptyCell(g[h])&&c.push(g[h])}}}return a}},AreaBlackManager:{enabled:!0},"AreaBlackManager@mochikoro":{enabled:!1},AreaWhiteManager:{enabled:!0},Flags:{use:!0},"Flags@nurikabe":{use:!0,redblk:!0},Graphic:{initialize:function(){this.Common.prototype.initialize.call(this),"nurikabe"!==this.owner.pid&&(this.bcolor=this.bcolor_GREEN,this.setBGCellColorFunc("qsub1"))},paint:function(){this.drawBGCells(),"nurikabe"===this.owner.pid&&this.drawDotCells(!1),this.drawGrid(),this.drawBlackCells(),this.drawNumbers(),this.drawChassis(),this.drawTarget()}},Encode:{decodePzpr:function(){this.decodeNumber16()},encodePzpr:function(){this.encodeNumber16()},decodeKanpen:function(){this.owner.fio.decodeCellQnum_kanpen()},encodeKanpen:function(){this.owner.fio.encodeCellQnum_kanpen()}},FileIO:{decodeData:function(){"nurikabe"===this.owner.pid?this.decodeCellQnumAns():(this.decodeCellQnum(),this.decodeCellAns())},encodeData:function(){"nurikabe"===this.owner.pid?this.encodeCellQnumAns():(this.encodeCellQnum(),this.encodeCellAns())},kanpenOpen:function(){this.decodeCellQnumAns_kanpen()},kanpenSave:function(){this.encodeCellQnumAns_kanpen()}},"AnsCheck@nurikabe":{checkAns:function(){var a=this.owner.board;if(!this.check2x2BlackCell())return"bc2x2";var b=a.getWCellInfo();if(!this.checkNoNumber(b))return"bkNoNum";var c=a.getBCellInfo();return this.checkOneArea(c)?this.checkDoubleNumber(b)?this.checkNumberAndSize(b)?null:"bkSizeNe":"bkNumGe2":"bcDivide"}},"AnsCheck@nuribou":{checkAns:function(){var a=this.owner.board,b=a.getBCellInfo();if(!this.checkBou(b))return"bcWidthGt1";if(!this.checkCorners(b))return"bcCornerSize";var c=a.getWCellInfo();return this.checkNoNumber(c)?this.checkDoubleNumber(c)?this.checkNumberAndSize(c)?null:"bkSizeNe":"bkNumGe2":"bkNoNum"},checkBou:function(a){return this.checkAllArea(a,function(a,b){return 1==a||1==b})},checkCorners:function(a){for(var b=!0,c=this.owner.board,d=0;d<c.cellmax;d++){var e=c.cell[d];if(e.bx!==c.maxbx-1&&e.by!==c.maxby-1){var f,g;if(e.isBlack()&&e.rt().dn().isBlack())f=e,g=e.rt().dn();else{if(!e.rt().isBlack()||!e.dn().isBlack())continue;f=e.rt(),g=e.dn()}if(a.getclistbycell(f).length==a.getclistbycell(g).length){if(this.checkOnly)return!1;a.getclistbycell(f).seterr(1),a.getclistbycell(g).seterr(1),b=!1}}}return b}},"AnsCheck@mochikoro,mochinyoro":{checkAns:function(){var a=this.owner.board;if(!this.check2x2BlackCell())return"bc2x2";if(!this.checkOneArea(a.getdir8WareaInfo()))return"bcDivide8";var b=a.getWCellInfo();if(!this.checkAreaRect(b))return"wcNotRect";if(!this.checkDoubleNumber(b))return"bkNumGe2";if(!this.checkNumberAndSize(b))return"bkSizeNe";if("mochinyoro"===this.owner.pid){var c=a.getBCellInfo();if(!this.checkAreaNotRect(c))return"bcRect"}return null},checkAreaNotRect:function(a){return this.checkAllArea(a,function(a,b,c){return a*b!==c})}},FailCode:{bkNoNum:["数字の入っていないシマがあります。","An area of white cells has no numbers."],bkNumGe2:["1つのシマに2つ以上の数字が入っています。","An area of white cells has plural numbers."],bkSizeNe:["数字とシマの面積が違います。","The number is not equal to the number of the size of the area."]},"FailCode@nuribou":{bcWidthGt1:["「幅１マス、長さ１マス以上」ではない黒マスのカタマリがあります。","there is a mass of black cells, whose width is more than two."],bcCornerSize:["同じ面積の黒マスのカタマリが、角を共有しています。","Masses of black cells whose length is the same share a corner."]},"FailCode@mochikoro,mochinyoro":{wcNotRect:["四角形でない白マスのブロックがあります。","There is a block of white cells that is not rectangle."],bcRect:["四角形になっている黒マスのブロックがあります。","There is a block of black cells that is rectangle."],bcDivide8:["孤立した白マスのブロックがあります。","White cells are devided."]}});