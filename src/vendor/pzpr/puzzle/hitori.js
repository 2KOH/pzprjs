/*! @license pzpr.js v3.4.0-pre (c) 2009-2014 sabo2, MIT license
 *   https://bitbucket.org/sabo2/pzprv3 */
pzpr.createCustoms("hitori",{MouseEvent:{RBBlackCell:!0,mouseinput:function(){this.owner.playmode?(this.mousestart||this.mousemove)&&this.inputcell():this.owner.editmode&&this.mousestart&&this.inputqnum()},inputRed:function(){this.dispRed()}},KeyEvent:{enablemake:!0},Cell:{disInputHatena:!0,nummaxfunc:function(){return Math.max(this.owner.board.qcols,this.owner.board.qrows)},posthook:{qnum:function(){this.owner.board.setInfoByCell(this),this.redDisp()},qans:function(){this.owner.board.setInfoByCell(this),this.redDisp()}},redDisp:function(){var a=this.owner,b=a.board;this.getConfig("plred")&&(a.painter.paintRange(b.minbx-1,this.by-1,b.maxbx+1,this.by+1),a.painter.paintRange(this.bx-1,b.minby-1,this.bx+1,b.maxby+1))}},Board:{qcols:8,qrows:8},AreaWhiteManager:{enabled:!0},Flags:{use:!0,redblkrb:!0},Graphic:{initialize:function(){this.Common.prototype.initialize.call(this),this.gridcolor=this.gridcolor_LIGHT,this.bcolor=this.bcolor_GREEN,this.fontErrcolor="red",this.fontBCellcolor="rgb(96,96,96)",this.setBGCellColorFunc("qsub1")},paint:function(){this.drawBGCells(),this.drawGrid(),this.drawBlackCells(),this.drawNumbers_hitori(),this.drawChassis(),this.drawTarget()},drawNumbers_hitori:function(){this.drawNumbers();var a=this.owner,b=a.board,c=a.checker;if(!b.haserror&&this.getConfig("plred")){c.inCheck=!0,c.checkOnly=!1,c.checkRowsColsSameNumber(),c.inCheck=!1;for(var d=0;d<b.cellmax;d++)this.drawNumber1(b.cell[d]);b.haserror=!0,b.errclear(!1)}}},Encode:{decodePzpr:function(){this.decodeHitori()},encodePzpr:function(){this.encodeHitori()},decodeHitori:function(){var a=0,b=0,c=this.outbstr,d=this.owner.board;for(b=0;b<c.length;b++){var e=d.cell[a],f=c.charAt(b);if(this.include(f,"0","9")||this.include(f,"a","z")?e.qnum=parseInt(f,36):"-"===f?(e.qnum=parseInt(c.substr(b+1,2),36),b+=2):"%"===f&&(e.qnum=-2),a++,a>=d.cellmax)break}this.outbstr=c.substr(b)},encodeHitori:function(){for(var a=0,b="",c=this.owner.board,d=0;d<c.cellmax;d++){var e="",f=c.cell[d].qnum;-2===f?e="%":f>=0&&16>f?e=f.toString(36):f>=16&&256>f?e="-"+f.toString(36):a++,0==a?b+=e:(b+=".",a=0)}a>0&&(b+="."),this.outbstr+=b},decodeKanpen:function(){this.owner.fio.decodeCellQnum_kanpen_hitori()},encodeKanpen:function(){this.owner.fio.encodeCellQnum_kanpen_hitori()}},FileIO:{decodeData:function(){this.decodeCellQnum(),this.decodeCellAns()},encodeData:function(){this.encodeCellQnum(),this.encodeCellAns()},kanpenOpen:function(){this.decodeCellQnum_kanpen_hitori(),this.decodeCellAns()},kanpenSave:function(){this.encodeCellQnum_kanpen_hitori(),this.encodeCellAns()},decodeCellQnum_kanpen_hitori:function(){this.decodeCell(function(a,b){"0"!==b&&"."!==b&&(a.qnum=parseInt(b))})},encodeCellQnum_kanpen_hitori:function(){this.encodeCell(function(a){return a.qnum>0?a.qnum.toString()+" ":"0 "})}},AnsCheck:{checkAns:function(){if(!this.checkAdjacentBlackCell())return"bcAdjacent";var a=this.owner.board.getWCellInfo();return this.checkRBBlackCell(a)?this.checkRowsColsSameNumber()?null:"nmDupRow":"wcDivideRB"},checkRowsColsSameNumber:function(){return this.checkRowsCols(this.isDifferentNumberInClist_hitori,function(a){return a.getQnum()})},isDifferentNumberInClist_hitori:function(a,b){var c=a.filter(function(a){return a.isWhite()&&a.isNum()});return this.isDifferentNumberInClist(c,b)}}});