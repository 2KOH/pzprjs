/*! @license pzpr.js v3.4.0-pre (c) 2009-2014 sabo2, MIT license
 *   https://bitbucket.org/sabo2/pzprv3 */
pzpr.createCustoms("heyawake",{MouseEvent:{RBBlackCell:!0,mouseinput:function(){this.owner.playmode?(this.mousestart||this.mousemove)&&this.inputcell():this.owner.editmode&&(this.mousestart||this.mousemove?this.inputborder():this.mouseend&&this.notInputted()&&this.inputqnum())},inputRed:function(){this.dispRed()}},KeyEvent:{enablemake:!0},Cell:{nummaxfunc:function(){var a=this.owner.board.rooms.getClistByCell(this).getRectSize(),b=a.cols,c=a.rows;if(b>c){var d=b;b=c,c=d}return 1===b?c+1>>1:2===b?c:3===b?c%4===0?c/4*5:c%4===1?(c-1)/4*5+2:c%4===2?(c-2)/4*5+3:(c+1)/4*5:Math.log(b+1)/Math.log(2)%1===0&&b===c?(b*c+b+c)/3:1&b&&1&c?(b*c+b+c-1)/3|0:(b*c+b+c-2)/3|0},minnum:0},Board:{isborder:1},AreaWhiteManager:{enabled:!0},AreaRoomManager:{enabled:!0,hastop:!0},Flags:{use:!0,redblkrb:!0},Graphic:{initialize:function(){this.Common.prototype.initialize.call(this),this.gridcolor=this.gridcolor_LIGHT,this.bcolor=this.bcolor_GREEN,this.bbcolor="rgb(160, 255, 191)",this.setBGCellColorFunc("qsub1")},paint:function(){this.drawBGCells(),this.drawGrid(),this.drawBlackCells(),this.drawNumbers(),this.drawBorders(),this.drawChassis(),this.drawBoxBorders(!1),this.drawTarget()}},Encode:{decodePzpr:function(){this.decodeBorder(),this.decodeRoomNumber16()},encodePzpr:function(){this.encodeBorder(),this.encodeRoomNumber16()},decodeKanpen:function(){this.owner.fio.decodeSquareRoom()},encodeKanpen:function(){this.owner.fio.encodeSquareRoom()},decodeHeyaApp:function(){for(var a=0,b=[],c=this.owner.board,a=0;a<c.cellmax;a++)b[a]=null;for(var d=0,e=this.outbstr.split("/"),a=0;a<c.cellmax;a++)if(null===b[a]){var f=c.cell[a];if(e[d].match(/(\d+in)?(\d+)x(\d+)$/)){RegExp.$1.length>0&&(f.qnum=parseInt(RegExp.$1));var g=f.bx,h=g+2*parseInt(RegExp.$2)-2,i=f.by,j=i+2*parseInt(RegExp.$3)-2;this.owner.fio.setRdataRect(b,d,{x1:g,x2:h,y1:i,y2:j})}d++}this.owner.fio.rdata2Border(!0,b)},encodeHeyaApp:function(){for(var a=[],b=this.owner.board,c=b.getRoomInfo(),d=1;d<=c.max;d++){var e=c.room[r].clist.getRectSize(),f=b.getc(e.x1,e.y1).qnum;a.push((f>=0?""+f+"in":"")+e.cols+"x"+e.rows)}this.outbstr=a.join("/")}},FileIO:{decodeData:function(){this.decodeAreaRoom(),this.decodeCellQnum(),this.decodeCellAns()},encodeData:function(){this.encodeAreaRoom(),this.encodeCellQnum(),this.encodeCellAns()},kanpenOpen:function(){this.decodeSquareRoom(),this.decodeCellAns()},kanpenSave:function(){this.encodeSquareRoom(),this.encodeCellAns()}},AnsCheck:{checkAns:function(){if(!this.checkAdjacentBlackCell())return"bcAdjacent";var a=this.owner.board.getWCellInfo();if(!this.checkRBBlackCell(a))return"wcDivideRB";var b=this.owner.board.getRoomInfo();return"ayeheya"!==this.owner.pid||this.checkFractal(b)?this.checkBlackCellCount(b)?this.checkCountinuousWhiteCell()?this.checkAreaRect(b)?null:"bkNotRect":"bkWcConsecGt3":"bkBcellNe":"bkNotSymBc"},checkFractal:function(a){for(var b=!0,c=1;c<=a.max;c++)for(var d=a.room[c].clist,e=d.getRectSize(),f=e.x1+e.x2,g=e.y1+e.y2,h=0;h<d.length;h++){var i=d[h],j=this.owner.board.getc(f-i.bx,g-i.by);if(i.isBlack()^j.isBlack()){if(this.checkOnly)return!1;d.seterr(1),b=!1}}return b},checkCountinuousWhiteCell:function(){return this.checkRowsColsPartly(this.isBorderCount,function(a){return a.isBlack()},!1)},isBorderCount:function(a,b){var c,d,e=b.getRectSize(),f=0,g=this.owner.board;if(e.x1===e.x2)for(c=e.x1,d=e.y1+1;d<=e.y2-1;d+=2)g.getb(c,d).isBorder()&&f++;else if(e.y1===e.y2)for(d=e.y1,c=e.x1+1;c<=e.x2-1;c+=2)g.getb(c,d).isBorder()&&f++;return f>=2?(b.seterr(1),!1):!0}},FailCode:{bkWcConsecGt3:["白マスが3部屋連続で続いています。","White cells are continued for three consecutive room."],bkNotSymBc:["部屋の中の黒マスが点対称に配置されていません。","Position of black cells in the room is not point symmetric."]}});