/*! @license pzpr.js v3.4.0 (c) 2009-2014 sabo2, MIT license
 *   https://bitbucket.org/sabo2/pzprv3 */
pzpr.createCustoms("bag",{MouseEvent:{mouseinput:function(){var a=this.owner;if(a.playmode){var b=!1;if(this.mousestart)b=!!a.getConfig("bgcolor")&&this.inputBGcolor0();else{if(!this.mousemove)return;b=!!a.getConfig("bgcolor")&&this.inputData>=10}b?this.inputBGcolor(!1):this.btn.Left?this.inputLine():this.btn.Right&&this.inputBGcolor(!0)}else a.editmode&&this.mousestart&&this.inputqnum()},inputBGcolor0:function(){return this.getpos(.25).oncell()},inputBGcolor:function(a){var b=this.getcell();b.isnull||b===this.mouseCell||(null===this.inputData&&(this.inputData=a||this.btn.Left?0===b.qsub?11:1===b.qsub?12:10:0===b.qsub?12:1===b.qsub?10:11),b.setQsub(this.inputData-10),b.draw(),this.mouseCell=b)}},KeyEvent:{enablemake:!0},Cell:{nummaxfunc:function(){return Math.min(this.maxnum,this.owner.board.qcols+this.owner.board.qrows-1)},minnum:2,inside:!1},Board:{hasborder:2,searchInsideArea:function(){this.cell[0].inside=0!==this.getx(0,0).lcnt();for(var a=1;a<this.maxby;a+=2){a>1&&(this.getc(1,a).inside=!!(this.getc(1,a-2).inside^this.getb(1,a-1).isLine()));for(var b=3;b<this.maxbx;b+=2)this.getc(b,a).inside=!!(this.getc(b-2,a).inside^this.getb(b-1,a).isLine())}}},LineManager:{borderAsLine:!0},Flags:{bgcolor:!0},Graphic:{initialize:function(){this.Common.prototype.initialize.call(this),this.gridcolor=this.gridcolor_DLIGHT,this.setBGCellColorFunc("qsub2")},paint:function(){this.drawBGCells(),this.drawDashedGrid(!1),this.drawLines(),this.drawNumbers(),this.drawTarget()}},Encode:{decodePzpr:function(){this.decodeNumber16()},encodePzpr:function(){this.encodeNumber16()}},FileIO:{decodeData:function(){this.decodeCellQnum(),this.decodeCellQsub(),this.decodeBorderLine()},encodeData:function(){this.encodeCellQnum(),this.encodeCellQsub(),this.encodeBorderLine()}},AnsCheck:{checkAns:function(){return this.checkLineCount(3)?this.checkLineCount(4)?this.checkOneLoop()?this.checkLineCount(1)?this.checkOutsideNumber()?this.checkCellNumber()?null:"nmSumViewNe":"nmOutside":"lnDeadEnd":"lnPlLoop":"lnCross":"lnBranch"},checkOutsideNumber:function(){return this.owner.board.searchInsideArea(),this.checkAllCell(function(a){return!a.inside&&a.isNum()})},checkCellNumber:function(){for(var a=!0,b=this.owner.board,c=0;c<b.cellmax;c++){var d=b.cell[c];if(d.isValidNum()){var e,f=new this.owner.CellList;for(f.add(d),e=d.lt();!e.isnull&&e.inside;)f.add(e),e=e.lt();for(e=d.rt();!e.isnull&&e.inside;)f.add(e),e=e.rt();for(e=d.up();!e.isnull&&e.inside;)f.add(e),e=e.up();for(e=d.dn();!e.isnull&&e.inside;)f.add(e),e=e.dn();if(d.getQnum()!==f.length){if(this.checkOnly)return!1;f.seterr(1),a=!1}}}return a}},FailCode:{nmOutside:["輪の内側に入っていない数字があります。","There is an outside number."],nmSumViewNe:["数字と輪の内側になる4方向のマスの合計が違います。","The number and the sum of the inside cells of four direction is different."]}});