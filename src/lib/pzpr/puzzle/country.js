/*! @license pzpr.js v3.4.0 (c) 2009-2014 sabo2, MIT license
 *   https://bitbucket.org/sabo2/pzprv3 */
pzpr.createCustoms("country",{MouseEvent:{mouseinput:function(){this.owner.playmode?this.mousestart||this.mousemove?this.btn.Left&&this.inputLine():this.mouseend&&this.notInputted()&&this.inputMB():this.owner.editmode&&(this.mousestart||this.mousemove?this.inputborder():this.mouseend&&this.notInputted()&&this.inputqnum())},inputRed:function(){this.dispRedLine()}},KeyEvent:{enablemake:!0},Cell:{nummaxfunc:function(){return Math.min(this.maxnum,this.owner.board.rooms.getCntOfRoomByCell(this))}},Board:{hasborder:1},LineManager:{isCenterLine:!0},AreaRoomManager:{enabled:!0,hastop:!0},Flags:{redline:!0,irowake:!0},Graphic:{initialize:function(){this.Common.prototype.initialize.call(this),this.gridcolor=this.gridcolor_SLIGHT},paint:function(){this.drawBGCells(),this.drawNumbers(),this.drawGrid(),this.drawBorders(),this.drawMBs(),this.drawLines(),this.drawChassis(),this.drawTarget()}},Encode:{decodePzpr:function(){this.decodeBorder(),this.decodeRoomNumber16()},encodePzpr:function(){this.encodeBorder(),this.encodeRoomNumber16()}},FileIO:{decodeData:function(){this.decodeAreaRoom(),this.decodeCellQnum(),this.decodeBorderLine(),this.decodeCellQsub()},encodeData:function(){this.encodeAreaRoom(),this.encodeCellQnum(),this.encodeBorderLine(),this.encodeCellQsub()}},AnsCheck:{checkAns:function(){if(!this.checkLineCount(3))return"lnBranch";if(!this.checkLineCount(4))return"lnCross";var a=this.owner.board.getRoomInfo();return this.checkRoom2(a)?this.checkRoadCount(a)?this.checkNoRoadCountry(a)?this.checkSideAreaGrass(a)?this.checkLineCount(1)?this.checkOneLoop()?null:"lnPlLoop":"lnDeadEnd":"scNoLine":"bkNoLine":"bkLineNe":"lnPassTwice"},checkRoadCount:function(a){return this.checkLinesInArea(a,function(a,b,c,d){return 0>=d||d==c})},checkNoRoadCountry:function(a){return this.checkLinesInArea(a,function(a,b,c){return 0!=c})},checkSideAreaGrass:function(a){return this.checkSideAreaCell(a,function(a,b){return 0===a.lcnt()&&0===b.lcnt()},!1)},checkRoom2:function(a){for(var b=!0,c=1;c<=a.max;c++){for(var d=0,e=a.room[c].clist,f=0;f<e.length;f++){var g,h=e[f];g=h.ub(),1===g.ques&&1===g.line&&d++,g=h.db(),1===g.ques&&1===g.line&&d++,g=h.lb(),1===g.ques&&1===g.line&&d++,g=h.rb(),1===g.ques&&1===g.line&&d++}if(d>2){if(this.checkOnly)return!1;e.seterr(1),b=!1}}return b}},FailCode:{bkLineNe:["数字のある国と線が通過するマスの数が違います。","the number of the cells that is passed any line in the country and the number written in the country is diffrerent."],scNoLine:["線が通らないマスが、太線をはさんでタテヨコにとなりあっています。","the cells that is not passed any line are adjacent over border line."],lnPassTwice:["線が１つの国を２回以上通っています。","A line passes a country twice or more."]}});