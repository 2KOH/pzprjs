/*! @license pzpr.js v3.4.0 (c) 2009-2014 sabo2, MIT license
 *   https://bitbucket.org/sabo2/pzprv3 */
pzpr.createCustoms("tasquare",{MouseEvent:{mouseinput:function(){this.owner.playmode?(this.mousestart||this.mousemove)&&this.inputcell():this.owner.editmode&&this.mousestart&&this.inputqnum()}},KeyEvent:{enablemake:!0},Cell:{numberIsWhite:!0},AreaBlackManager:{enabled:!0},AreaWhiteManager:{enabled:!0},Flags:{use:!0},Graphic:{hideHatena:!0,initialize:function(){this.Common.prototype.initialize.call(this),this.gridcolor=this.gridcolor_LIGHT,this.fontsizeratio=.85},paint:function(){this.drawBGCells(),this.drawDotCells(!1),this.drawGrid(),this.drawBlackCells(),this.drawCellSquare(),this.drawNumbers(),this.drawChassis(),this.drawTarget()},drawCellSquare:function(){for(var a=this.vinc("cell_square","crispEdges"),b=.8*this.bw-1,c=.8*this.bh-1,d="c_sq_",e=this.range.cells,f=0;f<e.length;f++){var g=e[f];if(-1!==g.qnum){if(a.lineWidth=1,a.strokeStyle="black",a.fillStyle=1===g.error?this.errbcolor1:"white",this.vnop(d+g.id,this.FILL)){var h=g.bx*this.bw,i=g.by*this.bh;a.shapeRect(h-b,i-c,2*b+1,2*c+1)}}else this.vhide([d+g.id])}}},Encode:{decodePzpr:function(){this.decodeNumber16()},encodePzpr:function(){this.encodeNumber16()}},FileIO:{decodeData:function(){this.decodeCellQnumAns()},encodeData:function(){this.encodeCellQnumAns()}},AnsCheck:{checkAns:function(){var a=this.owner.board.getBCellInfo();if(!this.checkAreaSquare(a))return"bcNotSquare";var b=this.owner.board.getWCellInfo();return this.checkOneArea(b)?this.checkNumberSquare(a,!0)?this.checkNumberSquare(a,!1)?null:"ceNoBcell":"ceSumSizeNe":"wcDivide"},checkNumberSquare:function(a,b){for(var c=!0,d=this.owner.board,e=0;e<d.cellmax;e++){var f=d.cell[e];if(!(b?f.getQnum()<0:-2!==f.getQnum())){var g=new this.owner.CellList;if(f.up().isBlack()&&g.extend(a.getclistbycell(f.up())),f.dn().isBlack()&&g.extend(a.getclistbycell(f.dn())),f.lt().isBlack()&&g.extend(a.getclistbycell(f.lt())),f.rt().isBlack()&&g.extend(a.getclistbycell(f.rt())),b?g.length!==f.getQnum():0===g.length){if(this.checkOnly)return!1;g.seterr(1),f.seterr(1),c=!1}}}return c}},FailCode:{ceSumSizeNe:["数字とそれに接する黒マスの大きさの合計が一致しません。","Sum of the adjacent masses of black cells is not equal to the number."],ceNoBcell:["数字のない□に黒マスが接していません。","No black cells are adjacent to square mark without numbers."]}});