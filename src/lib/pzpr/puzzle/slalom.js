/*! @license pzpr.js v3.4.0 (c) 2009-2014 sabo2, MIT license
 *   https://bitbucket.org/sabo2/pzprv3 */
!function(){var a=pzpr.consts;pzpr.createCustoms("slalom",{MouseEvent:{mouseinput:function(){this.owner.playmode?this.btn.Left?this.mousestart||this.mousemove?this.inputLine():this.mouseend&&this.notInputted()&&this.inputpeke():this.btn.Right&&(this.mousestart||this.mousemove)&&this.inputpeke():this.owner.editmode&&(this.mousestart||this.mousemove?this.inputGate():this.mouseend&&(10==this.inputData?this.inputStartid():this.notInputted()&&this.inputGate_end()))},inputRed:function(){this.dispRedLine()},inputGate_end:function(){var a=this.getcell();a.isnull||(a!==this.cursor.getTCC()?this.setcursor(a):this.inputGate_end_main(a))},inputGate_end_main:function(a){this.btn.Left?a.setQues({0:1,1:21,21:22,22:0}[a.getQues()]):this.btn.Right&&a.setQues({0:22,22:21,21:1,1:0}[a.getQues()]),a.setNum(-1),this.owner.board.hinfo.generateGates(),a.draw(),this.owner.board.startcell.draw()},inputStartid:function(){this.inputData=null;var a=this.owner.board.startcell;if(a.draw(),this.firstCell!==a){var b=this.firstCell;this.owner.opemgr.addOpe_Startpos(b.bx,b.by,a.bx,a.by)}},inputGate:function(){var b=this.getcell();if(!b.isnull){var c=b.getaddr(),d=!1,e=this.owner.board;if(this.mouseCell.isnull)b===e.startcell?(this.inputData=10,d=!0):this.firstPoint.set(this.inputPoint);else if(1===b.getQues()&&b.isNum())this.inputData=2;else{if(2===this.inputData){if(b!==this.mouseCell){var f=this.mouseCell;this.inputdirec(),f.draw(),d=!0,this.mouseCell=b}return}if(1===b.getQues());else if(10==this.inputData){if(b!==this.mouseCell){this.firstCell.isnull&&(this.firstCell=this.mouseCell);var f=e.startcell;e.startcell=b,f.draw(),d=!0}}else if(null===this.inputData){if(b===this.mouseCell){var g=Math.abs(this.inputPoint.bx-this.firstPoint.bx),h=Math.abs(this.inputPoint.by-this.firstPoint.by);h>=.25?(this.inputData=21,d=!0):g>=.25&&(this.inputData=22,d=!0)}else{var i=this.getdir(this.prevPos,c);i===a.UP||i===a.DN?(this.inputData=21,d=!0):(i===a.LT||i===a.RT)&&(this.inputData=22,d=!0)}d&&(b.getQues()===this.inputData&&(this.inputData=0),this.firstPoint.reset())}else if(b!==this.mouseCell)if(0==this.inputData)this.inputData=0,d=!0;else{var i=this.getdir(this.prevPos,c);i===a.UP||i===a.DN?(this.inputData=21,d=!0):(i===a.LT||i===a.RT)&&(this.inputData=22,d=!0)}}d&&(10!==this.inputData&&b.setQues(this.inputData),e.hinfo.generateGates(),b.draw(),e.startcell.draw()),this.prevPos=c,this.mouseCell=b}}},KeyEvent:{enablemake:!0,enableplay:!0,keyup_event:!0,moveTarget:function(a){return this.isSHIFT?!1:this.owner.editmode&&"x"!=a?this.moveTCell(a):!1},keyinput:function(a){if("x"!==a){if(this.keydown&&this.owner.editmode){if(this.key_inputdirec(a))return;this.key_inputqnum_slalom(a)}}else this.owner.painter.drawNumbersOnGate(!!this.keydown)},key_inputqnum_slalom:function(a){var b=this.cursor.getTCC(),c=this.owner.board;if("q"==a||"w"==a||"e"==a||"r"==a||"s"==a||" "==a){var d=b.getQues(),e=-1;if("q"==a)e=1!=d?1:0;else if("w"==a)e=21;else if("e"==a)e=22;else if("r"==a||" "==a)e=0;else{if("s"!=a)return;c.inputstartid(b)}if(d==e)return;-1!==e&&(b.setQues(e),0==e&&b.setNum(-1),(21==d||22==d||21==e||22==e)&&c.hinfo.generateGates(),b.draw(),c.startcell.draw())}else 1===b.getQues()&&this.key_inputqnum(a)}},Cell:{disInputHatena:!0,nummaxfunc:function(){return Math.min(this.owner.board.hinfo.max,this.maxnum)}},Border:{enableLineNG:!0},Board:{hasborder:1,hinfo:null,initialize:function(){this.Common.prototype.initialize.call(this),this.hinfo=new this.owner.HurdleManager},initBoardSize:function(a,b){this.Common.prototype.initBoardSize.call(this,a,b),this.startcell=this.cell[0],this.hinfo.init()},startcell:null,inputstartid:function(a){if(a!==this.startcell){var b=this.startcell;this.owner.opemgr.addOpe_Startpos(b.bx,b.by,a.bx,a.by),this.startcell=a,b.draw(),a.draw()}}},BoardExec:{posinfo:{},adjustBoardData:function(b,c){var d=this.owner.board;if(b&a.TURN)for(var e={21:22,22:21},f=d.cellinside(c.x1,c.y1,c.x2,c.y2),g=0;g<f.length;g++){var h=f[g],i=e[h.getQues()];i&&h.setQues(i)}this.posinfo=this.getAfterPos(b,c,d.startcell),this.adjustNumberArrow(b,c)},adjustBoardData2:function(b){var c=this.owner.board,d=this.posinfo;c.startcell=c.getc(d.bx2,d.by2);var e=this.owner.opemgr;b&a.REDUCE&&!e.undoExec&&!e.redoExec&&(e.forceRecord=!0,d.isdel&&e.addOpe_Startpos(d.bx1,d.by1,d.bx2,d.by2),e.forceRecord=!1),c.hinfo.generateGates()}},"StartposOperation:Operation":{setData:function(a,b,c,d){this.bx1=a,this.by1=b,this.bx2=c,this.by2=d},decode:function(a){return"PS"!==a[0]?!1:(this.bx1=+a[1],this.by1=+a[2],this.bx2=+a[3],this.by2=+a[4],!0)},toString:function(){return["PS",this.bx1,this.by1,this.bx2,this.by2].join(",")},undo:function(){this.exec(this.bx1,this.by1)},redo:function(){this.exec(this.bx2,this.by2)},exec:function(a,b){var c,d=this.owner.board,e=d.getc(a,b);c=d.startcell,d.startcell=e,c.draw(),e.draw()}},OperationManager:{addOpe_Startpos:function(a,b,c,d){this.addOpe_common(function(){var e=new this.owner.StartposOperation;return e.setData(a,b,c,d),e})},decodeOpe:function(a){var b=new this.owner.StartposOperation;return b.decode(a)?b:this.Common.prototype.decodeOpe.call(this,a)}},LineManager:{isCenterLine:!0},Flags:{redline:!0,irowake:1},Graphic:{initialize:function(){this.Common.prototype.initialize.call(this),this.gridcolor=this.gridcolor_LIGHT,this.linecolor="rgb(32, 32, 255)",this.pekecolor="rgb(0, 160, 0)",this.errlinebgcolor="rgb(160, 150, 255)",this.errbcolor1=this.errbcolor1_DARK,this.fontcolor=this.fontErrcolor="white"},paint:function(){this.drawBGCells(),this.drawGrid(),this.drawGates(),this.drawBlackCells(),this.drawArrowNumbers(),this.drawPekes(),this.drawLines(),this.drawStartpos(),this.drawChassis(),this.drawTarget()},getCellColor:function(a){if(1===a.ques){if(0===a.error)return this.cellcolor;if(1===a.error)return this.errcolor1}return null},drawGates:function(){for(var a=this.vinc("cell_gate","auto"),b=Math.max(this.cw/10,3),c=b/2,d=1.1*b,e=["c_dl21","c_dl22"],f=this.range.cells,g=0;g<f.length;g++){var h=f[g],i=h.id;if(a.fillStyle=4===h.error?this.errcolor1:this.cellcolor,21===h.ques){if(this.vnop([e[0],i].join("_"),this.FILL)){var j,k=h.bx*this.bw-c+1,l=(h.by-1)*this.bh,m=l+this.ch;for(a.beginPath(),j=l;m>j;j+=2*d)a.moveTo(k,j),a.lineTo(k+b,j),a.lineTo(k+b,j+d),a.lineTo(k,j+d),a.lineTo(k,j);a.closePath(),a.fill()}}else this.vhide([e[0],i].join("_"));if(22===h.ques){if(this.vnop([e[1],i].join("_"),this.FILL)){var k,j=h.by*this.bh-c+1,n=(h.bx-1)*this.bw,m=n+this.cw;for(a.beginPath(),k=n;m>k;k+=2*d)a.moveTo(k,j),a.lineTo(k+d,j),a.lineTo(k+d,j+b),a.lineTo(k,j+b),a.lineTo(k,j);a.closePath(),a.fill()}}else this.vhide([e[1],i].join("_"))}},drawStartpos:function(){var a=this.vinc("cell_circle","auto"),b=this.owner.board.startcell,c=this.range;if(!(b.bx<c.x1||c.x2<b.bx||b.by<c.y1||c.y2<b.by)){var d=.45*this.cw,e=.4*this.cw,f=(d+e)/2,g=e-d,h=["sposa_","sposb_"];this.vdel(h),a.lineWidth=g>=1?g:1,a.strokeStyle=this.cellcolor,a.fillStyle=10==this.owner.mouse.inputData?this.errbcolor1:"white",this.vnop(h[0],this.FILL)&&a.shapeCircle(b.bx*this.bw,b.by*this.bh,f),this.dispnumStartpos()}},dispnumStartpos:function(){var a=(this.vinc("cell_numberpos","auto"),this.owner.board),b=a.startcell,c=a.hinfo.max;if(c>=0){var d=10>c?.75:.66,e=b.bx*this.bw,f=b.by*this.bh;this.dispnum("stpos",1,""+c,d,"black",e,f)}else this.hidenum(key)},repaintParts:function(a){for(var b=a.cellinside(),c=0;c<b.length;c++){var d=b[c];if(d===this.owner.board.startcell){this.range={x1:d.bx,y1:d.by,x2:d.bx,y2:d.by},this.drawStartpos();break}}},drawNumbersOnGate:function(a){var b=this.owner.board;a&&b.hinfo.generateGateNumber();for(var c=0;c<b.cellmax;c++){var d=b.cell[c];if(21===d.ques||22===d.ques){var e="cell_"+c,f=b.hinfo.getGateid(c),g=f>0?b.hinfo.data[f].number:-1;if(a&&g>0){var h=10>g?.8:100>g?.7:.55,i=d.bx*this.bw,j=d.by*this.bh;this.dispnum(e,1,""+g,h,"tomato",i,j)}else this.hidenum(e)}}}},Encode:{decodePzpr:function(){this.decodeSlalom(this.checkpflag("d")?2:this.checkpflag("p")?1:0)},encodePzpr:function(b){return this.owner.board.hinfo.generateAll(),b===a.URL_PZPRV3&&(this.outpflag="d"),this.encodeSlalom(b===a.URL_PZPRV3?2:0)},decodeKanpen:function(){this.owner.fio.decodeBoard_kanpen(),this.owner.board.hinfo.generateGates()},encodeKanpen:function(){this.owner.fio.encodeBoard_kanpen()},decodeSlalom:function(a){var b=this.outbstr,c=b.split("/"),d=0,e=0,f=this.owner.board;for(e=0;e<c[0].length;e++){var g=c[0].charAt(e),h=f.cell[d];if("1"===g?h.ques=1:"2"===g?h.ques=21:"3"===g?h.ques=22:(this.include(g,"4","9")||this.include(g,"a","z"))&&(d+=parseInt(g,36)-4),d++,d>=f.cellmax)break}if(f.hinfo.generateGates(),0===a){var i=1;for(e+=1;e<c[0].length;e++){var g=c[0].charAt(e);if(this.include(g,"0","9")||this.include(g,"a","f")?f.hinfo.data[i].number=parseInt(g,16):"-"===g?(f.hinfo.data[i].number=parseInt(b.substr(e+1,2),16),e+=2):this.include(g,"g","z")&&(i+=parseInt(g,36)-16),i++,i>f.hinfo.max)break}for(var d=0;d<f.cellmax;d++){for(var j=f.hinfo.getConnectingGate(d),k=1e3,e=0;e<j.length;e++){var l=f.hinfo.data[j[e]].number;l>0&&(k=Math.min(k,l))}f.cell[d].qnum=1e3>k?k:-1}}else if(1===a||2===a){var d=0,m=0;for(e+=1;e<c[0].length;e++){var h=f.cell[d];if(1!==h.ques)e--;else if(m>0)e--,m--;else{var g=c[0].charAt(e);1===a&&(this.include(g,"0","9")||this.include(g,"a","f"))?h.qnum=parseInt(g,16):1===a&&"-"==g?(h.qnum=parseInt(b.substr(e+1,2),16),e+=2):2===a&&this.include(g,"0","4")?(h.qdir=parseInt(g,16),h.qnum=parseInt(b.charAt(e+1),16),e++):2===a&&this.include(g,"5","9")?(h.qdir=parseInt(g,16)-5,h.qnum=parseInt(b.substr(e+1,2),16),e+=2):g>="g"&&"z">=g&&(m=parseInt(g,36)-15-1)}if(d++,d>=f.cellmax)break}}f.startcell=f.cell[parseInt(c[1])],this.outbstr=c[0].substr(e)},encodeSlalom:function(a){for(var b="",c=0,d=this.owner.board,e=0;e<d.cellmax;e++){var f="",g=d.cell[e];1===g.ques?f="1":21===g.ques?f="2":22===g.ques?f="3":c++,0===c?b+=f:(f||32===c)&&(b+=(3+c).toString(36)+f,c=0)}if(c>0&&(b+=(3+c).toString(36)),c=0,0===a){for(var h=1;h<=d.hinfo.max;h++){var f="",i=d.hinfo.data[h].number;i>=0&&16>i?f=i.toString(16):i>=16&&256>i?f="-"+i.toString(16):c++,0===c?b+=f:(f||20===c)&&(b+=(15+c).toString(36)+f,c=0)}c>0&&(b+=(15+c).toString(36))}else if(1===a||2===a){for(var e=0;e<d.cellmax;e++){var g=d.cell[e];if(1===g.ques){var f="",i=g.qnum,j=g.qdir;i>=1&&16>i?f=(1===a?"":""+j)+i.toString(16):i>=16&&256>i?f=(1===a?"-":""+(j+5))+i.toString(16):c++,0===c?b+=f:(f||20===c)&&(b+=(15+c).toString(36)+f,c=0)}}c>0&&(b+=(15+c).toString(36))}b+="/"+d.startcell.id.toString(),this.outbstr+=b}},FileIO:{decodeData:function(){2==this.filever?this.decodeBoard_pzpr2():1==this.filever?this.decodeBoard_pzpr1():0==this.filever&&this.decodeBoard_old(),this.decodeBorderLine()},encodeData:function(){this.owner.board.hinfo.generateAll(),this.filever=2,this.encodeBoard_pzpr2(),this.encodeBorderLine()},kanpenOpen:function(){this.decodeBoard_kanpen(),this.decodeBorderLine(),this.owner.board.hinfo.generateGates()},kanpenSave:function(){this.owner.board.hinfo.generateAll(),this.encodeBoard_kanpen(),this.encodeBorderLine()},decodeBoard_pzpr1:function(){var a=this.owner.board;this.decodeCell(function(b,c){"o"===c?a.startcell=b:"i"===c?b.ques=21:"-"===c?b.ques=22:"#"===c?b.ques=1:"."!==c&&(b.ques=1,b.qnum=parseInt(c))}),this.owner.board.hinfo.generateGates()},decodeBoard_pzpr2:function(){var a=this.owner.board;this.decodeCell(function(b,c){if("o"===c)a.startcell=b;else if("i"===c)b.ques=21;else if("-"===c)b.ques=22;else if("#"===c)b.ques=1;else if("."!==c){var d=c.split(",");b.ques=1,b.qdir="0"!==d[0]?parseInt(d[0]):0,b.qnum="-"!==d[1]?parseInt(d[1]):-2}}),this.owner.board.hinfo.generateGates()},encodeBoard_pzpr2:function(){var a=this.owner.board;this.encodeCell(function(b){if(a.startcell===b)return"o ";if(21===b.ques)return"i ";if(22===b.ques)return"- ";if(1===b.ques&&b.qnum<=0)return"# ";if(1===b.ques){var c=0!==b.qdir?b.qdir.toString():"0",d=-2!==b.qnum?b.qnum.toString():"-";return[c,",",d," "].join("")}return". "})},decodeBoard_kanpen:function(){var a=this.owner.board;this.decodeCell(function(b,c){"+"===c?a.startcell=b:"|"===c?b.ques=21:"-"===c?b.ques=22:"0"===c?b.ques=1:"."!==c&&(b.ques=1,b.qnum=parseInt(c))})},encodeBoard_kanpen:function(){var a=this.owner.board;this.encodeCell(function(b){return a.startcell===b?"+ ":21===b.ques?"| ":22===b.ques?"- ":1===b.ques?(b.qnum>0?b.qnum.toString():"0")+" ":". "})},decodeBoard_old:function(){var a=[],b=this.owner.board;this.decodeCell(function(c,d){var e=c.id;a[e]=-1,"#"===d?c.ques=1:"o"===d?b.startcell=c:"."!==d&&("i"===d.charAt(0)?c.ques=21:"w"===d.charAt(0)&&(c.ques=22),d.length>1&&(a[e]=parseInt(d.substr(1))))}),b.hinfo.generateGates();for(var c=0;c<b.cellmax;c++)-1!==a[c]&&(b.hinfo.data[b.hinfo.getGateid(c)].number=a[c]);for(var c=0;c<b.cellmax;c++){for(var d=b.hinfo.getConnectingGate(c),e=1e3,f=0;f<d.length;f++){var g=b.hinfo.data[d[f]].number;g>0&&(e=Math.min(e,g))}b.cell[c].qnum=1e3>e?e:-1}}},AnsCheck:{checkAns:function(){return this.owner.board.hinfo.generateAll(),this.checkLineOnBlackCell()?this.checkLineCount(4)?this.checkLineCount(3)?this.checkGateLine(1)?this.checkStartid()?this.checkGateNumber()?this.checkLineCount(1)?this.checkOneLoop()?this.checkGateLine(2)?null:"nmUnpass":"lnPlLoop":"lnDeadEnd":"nmOrder":"gateStart":"gateRedup":"lnBranch":"lnCross":"lnOnBcell"},checkLineOnBlackCell:function(){return this.checkAllCell(function(a){return 1===a.getQues()&&a.lcnt()>0})},checkStartid:function(){var a=this.owner.board.startcell;return 2!=a.lcnt()?(a.seterr(1),!1):!0},checkGateLine:function(a){for(var b=!0,c=this.owner.board,d=1;d<=c.hinfo.max;d++){for(var e=0,f=c.hinfo.data[d].clist,g=0;g<f.length;g++)f[g].lcnt()>0&&e++;if(1==a&&e>1||2==a&&0==e){if(this.checkOnly)return!1;f.seterr(4),c.hinfo.getGatePole(d).seterr(1),b=!1}}return b},checkGateNumber:function(){var a=[],b=this.owner.board,c=b.startcell;c.rb().isLine()&&a.push({obj:c.rb(),dir:4}),c.db().isLine()&&a.push({obj:c.db(),dir:2}),c.lb().isLine()&&a.push({obj:c.lb(),dir:3}),c.ub().isLine()&&a.push({obj:c.ub(),dir:1});for(var d=0;d<a.length;d++)for(var e=a[d].obj.getaddr(),f=a[d].dir,g=-1,h=0;;)if(e.movedir(f,1),e.oncell()){var i=e.getc();if(i===b.startcell)return!0;if(21===i.getQues()||22===i.getQues()){var j=b.hinfo.getGateid(i.id),k=b.hinfo.data[j].number;if(h++,0>=k);else if(-1==g)if(2*k-1==b.hinfo.max);else{if(h!=k){if(h==b.hinfo.max+1-k)break;return b.hinfo.data[j].clist.seterr(4),b.hinfo.getGatePole(j).seterr(1),!1}g=1}else if(1==g&&h!=k)return b.hinfo.data[j].clist.seterr(4),b.hinfo.getGatePole(j).seterr(1),!1}if(2!==i.lcnt())break;1!=f&&i.db().isLine()?f=2:2!=f&&i.ub().isLine()?f=1:3!=f&&i.rb().isLine()?f=4:4!=f&&i.lb().isLine()&&(f=3)}else if(!e.getb().isLine())break;return!0}},FailCode:{gateRedup:["線が２回以上通過している旗門があります。","A line goes through a gate twice or more."],gateStart:["○から線が２本出ていません。","A line goes through a gate twice or more."],nmOrder:["旗門を通過する順番が間違っています。","the order of passing the gate is wrong."],nmUnpass:["線が通過していない旗門があります。","there is a gate that the line is not passing."]},HurdleData:{initialize:function(){this.clist=new this.owner.CellList,this.number=-1,this.val=0,this.x1=this.x2=this.y1=this.y2=-1}},HurdleManager:{getGateid:function(a){return 0>a||a>=this.owner.board.cellmax?-1:this.gateid[a]},getGatePole:function(a){var b,c,d=this.owner.board,e=new this.owner.CellList;if(21==this.data[a].val)b=d.getc(this.data[a].x1,this.data[a].y1-2),c=d.getc(this.data[a].x1,this.data[a].y2+2);else{if(22!=this.data[a].val)return[];b=d.getc(this.data[a].x1-2,this.data[a].y1),c=d.getc(this.data[a].x2+2,this.data[a].y1)}return b.isnull||1!==b.getQues()||e.add(b),c.isnull||1!==c.getQues()||e.add(c),e},getConnectingGate:function(a){var b,c=this.owner.board,d=c.cell[a],e=[];return b=d.up(),b.isnull||21!==b.getQues()||e.push(this.gateid[b.id]),b=d.dn(),b.isnull||21!==b.getQues()||e.push(this.gateid[b.id]),b=d.lt(),b.isnull||22!==b.getQues()||e.push(this.gateid[b.id]),b=d.rt(),b.isnull||22!==b.getQues()||e.push(this.gateid[b.id]),e},init:function(){this.max=0,this.gateid=[];for(var a=0;a<this.owner.board.cellmax;a++)this.gateid[a]=-1;this.data=[]},generateAll:function(){this.generateGates(),this.generateGateNumber()},generateGates:function(){var a=this.owner.board;this.init();for(var b=0;b<a.cellmax;b++){var c=a.cell[b],d=c.getQues();if(0!==d&&1!==d&&-1===this.getGateid(c.id)){var e=c.getaddr(),f=21===d;for(this.max++,this.data[this.max]=new this.owner.HurdleData;;){var g=e.getc();if(g.isnull||g.getQues()!==d)break;this.data[this.max].clist.add(g),this.gateid[g.id]=this.max,f?e.move(0,2):e.move(2,0)}this.data[this.max].x1=c.bx,this.data[this.max].y1=c.by,this.data[this.max].x2=f?e.bx:e.bx-2,this.data[this.max].y2=f?e.by-2:e.by,this.data[this.max].val=d}}},generateGateNumber:function(){for(var b=1;b<=this.max;b++)this.data[b].number=-1;for(var c=[],d=this.owner.board,b=1;b<=this.max;b++)c[b]=[];for(var e=0;e<d.cellmax;e++){var f=d.cell[e];if(1===f.getQues()){var g=f.getNum(),h=f.getQdir();if(0>=g||g>this.max)continue;h!==a.NDIR&&h!==a.UP||21!==f.up().getQues()||c[this.gateid[f.up().id]].push(g),h!==a.NDIR&&h!==a.DN||21!==f.dn().getQues()||c[this.gateid[f.dn().id]].push(g),h!==a.NDIR&&h!==a.LT||22!==f.lt().getQues()||c[this.gateid[f.lt().id]].push(g),h!==a.NDIR&&h!==a.RT||22!==f.rt().getQues()||c[this.gateid[f.rt().id]].push(g)}}for(var i=this,j=function(a){for(var b=1;b<=i.max;b++){for(var d=[],e=0;e<c[b].length;e++)1!=a[c[b][e]]&&d.push(c[b][e]);c[b]=d}},k=[],l=1;l<=this.max;l++)k[l]=0;for(var b=1;b<=this.max;b++)2==c[b].length&&c[b][0]>0&&c[b][0]==c[b][1]&&(this.data[b].number=c[b][0],k[c[b][0]]=1,c[b]=[]);j(k);for(var m=!0;m;){m=!1;for(var l=1;l<=this.max;l++)k[l]=0;for(var n=[],l=1;l<=this.max;l++)n[l]=0;for(var b=1;b<=this.max;b++)1==c[b].length&&n[c[b][0]]++;for(var b=1;b<=this.max;b++){var o=1==c[b].length?c[b][0]:-1;o>0&&n[o]>1&&(o=-1),o>0&&(this.data[b].number=o,k[o]=1,c[b]=[],m=!0)}if(j(k),!m){for(var l=1;l<=this.max;l++)n[l]=0;for(var b=1;b<=this.max;b++)for(var p=0;p<c[b].length;p++)n[c[b][p]]++;for(var b=1;b<=this.max;b++){for(var o=-1,p=0;p<c[b].length;p++)1==n[c[b][p]]&&(o=-1==o?c[b][p]:-1);o>0&&(this.data[b].number=o,k[o]=1,c[b]=[],m=!0)}j(k)}}}}})}();