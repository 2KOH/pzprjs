/*! @license pzpr.js v3.4.0 (c) 2009-2014 sabo2, MIT license
 *   https://bitbucket.org/sabo2/pzprv3 */
pzpr.createCustoms("nanro",{MouseEvent:{mouseinput:function(){this.owner.playmode?this.mousestart||this.mousemove?this.btn.Left?this.dragnumber_nanro():this.mousemove&&this.btn.Right&&this.inputDot_nanro():this.mouseend&&this.notInputted()&&(this.mouseCell=this.owner.board.emptycell,this.inputqnum()):this.owner.editmode&&(this.mousestart||this.mousemove?this.inputborder():this.mouseend&&this.notInputted()&&(this.mouseCell=this.owner.board.emptycell,this.inputqnum()))},dragnumber_nanro:function(){var a=this.getcell();a.isnull||a===this.mouseCell||(this.mouseCell.isnull?(this.inputData=a.getNum(),-2===this.inputData?this.inputData=null:-1===this.inputData&&(1===a.getQsub()?this.inputData=-2:2===a.getQsub()&&(this.inputData=-3)),this.mouseCell=a):-1===a.getQnum()&&(a.setNum(this.inputData),this.mouseCell=a,a.draw()))},inputDot_nanro:function(){var a=this.getcell();a.isnull||a===this.mouseCell||a.isNum()||(null===this.inputData&&(this.inputData=2===a.getQsub()?0:2),2==this.inputData?(a.setAnum(-1),a.setQsub(2)):0==this.inputData&&(a.setAnum(-1),a.setQsub(0)),this.mouseCell=a,a.draw())}},KeyEvent:{enablemake:!0,enableplay:!0,keyinput:function(a){this.key_view(a)},key_view:function(a){if(this.owner.playmode){var b=this.cursor.getTCC();"q"===a||"a"===a||"z"===a?a="s1":"w"===a||"s"===a||"x"===a?a="s2":"e"===a||"d"===a||"c"===a||"-"===a?a=" ":"1"===a&&1===b.getAnum()?a="s1":"2"===a&&2===b.getAnum()&&(a="s2")}this.key_inputqnum(a)}},Cell:{numberWithMB:!0,nummaxfunc:function(){return this.owner.board.rooms.getCntOfRoomByCell(this)}},Board:{qcols:8,qrows:8,hasborder:1},AreaNumberManager:{enabled:!0},AreaRoomManager:{enabled:!0},Graphic:{initialize:function(){this.Common.prototype.initialize.call(this),this.gridcolor=this.gridcolor_LIGHT},paint:function(){this.drawBGCells(),this.drawGrid(),this.drawMBs(),this.drawNumbers(),this.drawBorders(),this.drawChassis(),this.drawCursor()}},Encode:{decodePzpr:function(){this.decodeBorder(),this.decodeNumber16()},encodePzpr:function(){this.encodeBorder(),this.encodeNumber16()},decodeKanpen:function(){this.owner.fio.decodeAreaRoom(),this.owner.fio.decodeCellQnum_kanpen()},encodeKanpen:function(){this.owner.fio.encodeAreaRoom(),this.owner.fio.encodeCellQnum_kanpen()}},FileIO:{decodeData:function(){this.decodeAreaRoom(),this.decodeCellQnum(),this.decodeCellAnumsub()},encodeData:function(){this.encodeAreaRoom(),this.encodeCellQnum(),this.encodeCellAnumsub()}},AnsCheck:{checkAns:function(){if(!this.check2x2NumberCell())return"nm2x2";if(!this.checkSideAreaNumber())return"scNum";var a=this.getErrorFlag_cell();if(!this.checkErrorFlag_cell(a,4))return"bkPlNum";if(!this.checkErrorFlag_cell(a,1))return"nmCountGt";var b=this.owner.board.getNumberInfo();return this.checkOneArea(b)?this.checkErrorFlag_cell(a,2)?this.checkErrorFlag_cell(a,3)?null:"bkNoNum":"nmCountLt":"nmDivide"},check2x2NumberCell:function(){return this.check2x2Block(function(a){return a.isNum()})},checkSideAreaNumber:function(a){return this.checkSideAreaCell(a,function(a,b){return a.sameNumber(b)},!1)},getErrorFlag_cell:function(){for(var a=this.owner.board.getRoomInfo(),b=1,c=a.max;c>=b;b++){var d=a.room[b],e=d.clist;d.error=0,d.number=-1;for(var f=[],g=0,h=0,i=0,j=0;j<e.length;j++){var k=e[j].getNum();-1==k?h++:isNaN(f[k])?(g++,i=k,f[k]=1):f[k]++}g>1?d.error=4:0==g?d.error=3:1==g&&i<f[i]?(d.error=1,d.number=i):1==g&&i>f[i]?(d.error=2,d.number=i):(d.error=-1,d.number=i)}return a}},FailCode:{bkNoNum:["数字が含まれていないブロックがあります。","A block has no number."],nm2x2:["数字が2x2のかたまりになっています。","There is a 2x2 block of numbers."],scNum:["同じ数字が境界線を挟んで隣り合っています。","Adjacent blocks have the same number."],nmCountGt:["入っている数字の数が数字より多いです。","A number is bigger than the size of block."],nmCountLt:["入っている数字の数が数字より少ないです。","A number is smaller than the size of block."]}});