/*! @license pzpr.js v3.4.0 (c) 2009-2014 sabo2, MIT license
 *   https://bitbucket.org/sabo2/pzprv3 */
pzpr.createCustoms("shimaguni",{MouseEvent:{mouseinput:function(){this.owner.playmode?(this.mousestart||this.mousemove)&&this.inputcell():this.owner.editmode&&(this.mousestart||this.mousemove?this.inputborder():this.mouseend&&this.notInputted()&&this.inputqnum())}},KeyEvent:{enablemake:!0},Cell:{nummaxfunc:function(){return Math.min(this.maxnum,this.owner.board.rooms.getCntOfRoomByCell(this))}},"Cell@chocona":{minnum:0},Board:{hasborder:1},CellList:{getLandAreaOfClist:function(){for(var a=0,b=0,c=this.length;c>b;b++)this[b].isBlack()&&a++;return a},isSeqBlock:function(){for(var a=this.length>0?[this[0]]:[],b=this.length,c={},d=0;b>d;d++)c[this[d].id]=0;for(;a.length>0;){var e=a.pop();if(1!==c[e.id]){b--,c[e.id]=1;for(var f=e.getdir4clist(),d=0;d<f.length;d++)0===c[f[d][0].id]&&a.push(f[d][0])}}return 0===b}},AreaBlackManager:{enabled:!0},AreaRoomManager:{enabled:!0,hastop:!0},Flags:{use:!0},Graphic:{initialize:function(){this.Common.prototype.initialize.call(this),"shimaguni"===this.owner.pid?(this.bcolor="rgb(191, 191, 255)",this.bbcolor="rgb(191, 191, 255)"):"chocona"===this.owner.pid&&(this.bcolor=this.bcolor_GREEN),this.gridcolor=this.gridcolor_LIGHT,this.setBGCellColorFunc("qsub1")},paint:function(){this.drawBGCells(),this.drawGrid(),this.drawBlackCells(),this.drawNumbers(),this.drawBorders(),this.drawChassis(),this.drawBoxBorders(!1),this.drawTarget()}},Encode:{decodePzpr:function(){this.decodeBorder(),this.decodeRoomNumber16()},encodePzpr:function(){this.encodeBorder(),this.encodeRoomNumber16()}},FileIO:{decodeData:function(){this.decodeAreaRoom(),this.decodeCellQnum(),this.decodeCellAns()},encodeData:function(){this.encodeAreaRoom(),this.encodeCellQnum(),this.encodeCellAns()}},"AnsCheck@shimaguni":{checkAns:function(){var a=this.owner.board.getRoomInfo();return this.checkSideAreaBlackCell(a)?this.checkSeqBlocksInRoom()?this.checkBlackCellCount(a)?this.checkSideAreaLandSide(a)?this.checkNoBlackCellInArea(a)?null:"bkNoBcell":"sbEqBcell":"bkBcellNe":"bkBcDivide":"scBcell"},checkSideAreaBlackCell:function(a){return this.checkSideAreaCell(a,function(a,b){return a.isBlack()&&b.isBlack()},!0)},checkSideAreaLandSide:function(a){return this.checkSideAreaSize(a,function(a){return a.clist.getLandAreaOfClist()})},checkSeqBlocksInRoom:function(){for(var a=!0,b=1;b<=this.owner.board.rooms.max;b++){var c=this.owner.board.rooms.getClist(b).filter(function(a){return a.isBlack()});if(!c.isSeqBlock()){if(this.checkOnly)return!1;c.seterr(1),a=!1}}return a}},"AnsCheck@chocona":{checkAns:function(){var a=this.owner.board.getBCellInfo();if(!this.checkAreaRect(a))return"bcNotRect";var b=this.owner.board.getRoomInfo();return this.checkBlackCellCount(b)?null:"bkBcellNe"}},"FailCode@shimaguni":{bkBcellNe:["海域内の数字と国のマス数が一致していません。","the number of black cells is not equals to the number."],bkBcDivide:["1つの海域に入る国が2つ以上に分裂しています。","Countries in one marine area are devided to plural ones."],bkNoBcell:["黒マスのカタマリがない海域があります。","A marine area has no black cells."],scBcell:["異なる海域にある国どうしが辺を共有しています。","Countries in other marine area share the side over border line."],sbEqBcell:["隣り合う海域にある国の大きさが同じです。","the size of countries that there are in adjacent marine areas are the same."]},"FailCode@chocona":{bcNotRect:["黒マスのカタマリが正方形か長方形ではありません。","A mass of black cells is not rectangle."],bkBcellNe:["数字のある領域と、領域の中にある黒マスの数が違います。","the number of Black cells in the area and the number written in the area is different."]}});