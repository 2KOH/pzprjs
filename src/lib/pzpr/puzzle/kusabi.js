/*! @license pzpr.js v3.4.0 (c) 2009-2014 sabo2, MIT license
 *   https://bitbucket.org/sabo2/pzprv3 */
pzpr.createCustoms("kusabi",{MouseEvent:{mouseinput:function(){this.owner.playmode?this.btn.Left?this.mousestart||this.mousemove?this.inputLine():this.mouseend&&this.notInputted()&&this.inputpeke():this.btn.Right&&(this.mousestart||this.mousemove)&&this.inputpeke():this.owner.editmode&&this.mousestart&&this.inputqnum()}},KeyEvent:{enablemake:!0},Cell:{numberAsObject:!0,maxnum:3},Board:{hasborder:1},LineManager:{isCenterLine:!0},AreaLineManager:{enabled:!0},Graphic:{hideHatena:!0,initialize:function(){this.Common.prototype.initialize.call(this),this.gridcolor=this.gridcolor_LIGHT,this.circleratio=[.45,.4]},paint:function(){this.drawBGCells(),this.drawGrid(),this.drawPekes(),this.drawLines(),this.drawCircles(),this.drawNumbers(),this.drawChassis(),this.drawTarget()},drawNumber1:function(a){var b=a.qnum,c="cell_"+a.id;if(b>=1&&3>=b){var d={1:"同",2:"短",3:"長"}[b],e=a.bx*this.bw,f=a.by*this.bh;this.dispnum(c,1,d,.65,this.fontcolor,e,f)}else this.hidenum(c)}},Encode:{decodePzpr:function(){this.decodeNumber10()},encodePzpr:function(){this.encodeNumber10()}},FileIO:{decodeData:function(){this.decodeCellQnum(),this.decodeBorderLine()},encodeData:function(){this.encodeCellQnum(),this.encodeBorderLine()}},AnsCheck:{checkAns:function(){if(!this.checkLineCount(3))return"lnBranch";if(!this.checkLineCount(4))return"lnCross";var a=this.owner.board.getLareaInfo();if(!this.checkTripleObject(a))return"lcTripleNum";if(!this.checkLineOverLetter())return"lcOnNum";var b=this.getErrorFlag_line();return this.checkErrorFlag_line(b,7)?this.checkErrorFlag_line(b,6)?this.checkErrorFlag_line(b,5)?this.checkErrorFlag_line(b,4)?this.checkErrorFlag_line(b,3)?this.checkErrorFlag_line(b,2)?this.checkErrorFlag_line(b,1)?this.checkDisconnectLine(a)?this.checkAloneCircle()?null:"nmIsolate":"lcIsolate":"lcDeadEnd":"lcLenInvDiff":"lcLenInvNe":"lcCurveLt2":"lcCurveGt2":"lcInvalid":"lcNotKusabi"},check1st:function(){return this.checkAloneCircle()?null:"nmIsolate"},checkAloneCircle:function(){return this.checkAllCell(function(a){return 0===a.lcnt()&&a.isNum()})},isErrorFlag_line:function(a){var b=a.room[a.max],c=b.ccnt,d=b.length,e=b.cells[0],f=b.cells[1],g=b.dir1,h=b.dir2,i=e.getQnum(),j=f.isnull?-1:f.getQnum(),k=0;2===c&&g!==h?k=7:f.isnull||2!==c||1===i&&1===j||2===i&&3===j||3===i&&2===j||-2===i||-2===j?c>2?k=5:!f.isnull&&2>c?k=4:f.isnull||2!==c||1!==i&&1!==j||d[0]===d[2]?!f.isnull&&2===c&&((2===i||3===j)&&d[0]>=d[2]||(3===i||2===j)&&d[0]<=d[2])?k=2:f.isnull&&(k=1):k=3:k=6,b.error=k}},FailCode:{lcOnNum:["○の上を線が通過しています。","A line goes through a circle."],lcIsolate:["○につながっていない線があります。","A line doesn't connect any circle."],lcTripleNum:["3つ以上の○が繋がっています。","Three or more objects are connected."],lcNotKusabi:["丸がコの字型に繋がっていません。","The shape of a line is not correct."],lcInvalid:["繋がる丸が正しくありません。","The type of connected circle is wrong."],lcCurveGt2:["線が2回以上曲がっています。","A line turns twice or more."],lcCurveLt2:["線が2回曲がっていません。","A line turns only once or lower."],lcLenInvNe:["線の長さが同じではありません。","The length of lines is differnet."],lcLenInvDiff:["線の長短の指示に反してます。","The length of lines is not suit for the label of object."],nmIsolate:["どこにもつながっていない○があります。","A circle is not connected another object."]}});