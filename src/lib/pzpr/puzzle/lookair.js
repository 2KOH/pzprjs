/*! @license pzpr.js v3.4.0 (c) 2009-2014 sabo2, MIT license
 *   https://bitbucket.org/sabo2/pzprv3 */
pzpr.createCustoms("lookair",{MouseEvent:{mouseinput:function(){this.owner.playmode?(this.mousestart||this.mousemove)&&this.inputcell():this.owner.editmode&&this.mousestart&&this.inputqnum()}},KeyEvent:{enablemake:!0},Cell:{maxnum:5,minnum:0,countDir5Cell:function(a){var b,c=0;return b=this,!b.isnull&&a(b)&&c++,b=this.up(),!b.isnull&&a(b)&&c++,b=this.dn(),!b.isnull&&a(b)&&c++,b=this.lt(),!b.isnull&&a(b)&&c++,b=this.rt(),!b.isnull&&a(b)&&c++,c}},AreaBlackManager:{enabled:!0},Flags:{use:!0},Graphic:{initialize:function(){this.Common.prototype.initialize.call(this),this.bcolor=this.bcolor_GREEN,this.setBGCellColorFunc("qsub1")},paint:function(){this.drawBGCells(),this.drawDashedGrid(),this.drawBlackCells(),this.drawNumbers(),this.drawChassis(),this.drawTarget()}},Encode:{decodePzpr:function(){this.decodeNumber10()},encodePzpr:function(){this.encodeNumber10()}},FileIO:{decodeData:function(){this.decodeCellQnum(),this.decodeCellAns()},encodeData:function(){this.encodeCellQnum(),this.encodeCellAns()}},AnsCheck:{checkAns:function(){if(this.checkOnly&&!this.checkDir5BlackCell())return"nmBcell5Ne";var a=this.owner.board.getBCellInfo();return this.checkAreaSquare(a)?this.checkLookair(a)?this.checkOnly||this.checkDir5BlackCell()?null:"nmBcell5Ne":"lookairBC":"bcNotSquare"},checkDir5BlackCell:function(){for(var a=!0,b=function(a){return a.isBlack()},c=0;c<this.owner.board.cellmax;c++){var d=this.owner.board.cell[c];if(d.isValidNum()&&d.getNum()!==d.countDir5Cell(b)){if(this.checkOnly)return!1;d.seterr(1),a=!1}}return a},checkLookair:function(a){function b(b,e,f){var g=d.getc(e,f);if(g.isnull)return 1;if(!g.isBlack())return 0;var h=a.getclistbycell(g);if(b.length===h.length){if(this.checkOnly)return 2;b.seterr(1),h.seterr(1),c=!1}return 1}for(var c=!0,d=this.owner.board,e=1;e<=a.max;e++){for(var f=a.room[e].clist,g=f.getRectSize(),h=g.x1;h<=g.x2;h+=2)for(var i=g.y1-2;i>=this.owner.board.minby;i-=2){var j=b(f,h,i);if(1===j)break;if(2===j)return!1}for(var i=g.y1;i<=g.y2;i+=2)for(var h=g.x1-2;h>=this.owner.board.minbx;h-=2){var j=b(f,h,i);if(1===j)break;if(2===j)return!1}}return c}},FailCode:{nmBcell5Ne:["数字およびその上下左右にある黒マスの数が間違っています。","the number is not equal to the number of black cells in the cell and four adjacent cells."],lookairBC:["同じ大きさの黒マスのカタマリの間に他の黒マスのカタマリがありません。","A mass of black cells can looks other same size mass of black cells."]}});