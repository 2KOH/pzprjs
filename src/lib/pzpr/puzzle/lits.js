/*! @license pzpr.js v3.4.0 (c) 2009-2014 sabo2, MIT license
 *   https://bitbucket.org/sabo2/pzprv3 */
!function(){var a=pzpr.consts;pzpr.createCustoms("lits",{MouseEvent:{mouseinput:function(){this.owner.playmode?(this.mousestart||this.mousemove)&&this.inputcell():this.owner.editmode&&(this.mousestart||this.mousemove)&&this.inputborder()},inputRed:function(){this.dispRed()}},Board:{hasborder:1,getTetrominoInfo:function(a){for(var b=new this.owner.AreaInfo,c=0;c<this.cellmax;c++)b.id[c]=null;for(var d=1;d<=a.max;d++){var e=a.room[d].clist.filter(function(a){return a.isBlack()}),f=e.length;if(4===f){for(var g=e[0].bx,h=e[0].by,i=0,j=1;f>j;j++)i+=10*(e[j].by-h>>1)+(e[j].bx-g>>1);switch(i){case 13:case 15:case 27:case 31:case 33:case 49:case 51:for(var j=0;f>j;j++)b.id[e[j].id]="L";break;case 6:case 60:for(var j=0;f>j;j++)b.id[e[j].id]="I";break;case 14:case 30:case 39:case 41:for(var j=0;f>j;j++)b.id[e[j].id]="T";break;case 20:case 24:case 38:case 42:for(var j=0;f>j;j++)b.id[e[j].id]="S"}}}return this.getBlockInfo(b)},getBlockInfo:function(a){for(var b=new this.owner.AreaInfo,c=0;c<this.cellmax;c++)b.id[c]=null!==a.id[c]?0:null;for(var c=0;c<this.cellmax;c++)if(b.emptyCell(this.cell[c])){b.addRoom();for(var d=[this.cell[c]];d.length>0;){var e=d.pop();if(b.emptyCell(e)){b.addCell(e);for(var f=e.getdir4clist(),g=0;g<f.length;g++)a.getRoomID(e)==a.getRoomID(f[g][0])&&d.push(f[g][0])}}}return b}},CellList:{isSeqBlock:function(){for(var a=this.length>0?[this[0]]:[],b=this.length,c={},d=0;b>d;d++)c[this[d].id]=0;for(;a.length>0;){var e=a.pop();if(1!==c[e.id]){b--,c[e.id]=1;for(var f=e.getdir4clist(),d=0;d<f.length;d++)0===c[f[d][0].id]&&a.push(f[d][0])}}return 0===b}},AreaBlackManager:{enabled:!0},AreaRoomManager:{enabled:!0},Flags:{use:!0},"Flags@lits":{use:!0,redblk:!0},Graphic:{initialize:function(){this.Common.prototype.initialize.call(this),"lits"===this.owner.pid?(this.gridcolor="rgb(48, 48, 48)",this.cellcolor="rgb(96, 96, 96)",this.errcolor2="rgb(32, 32, 255)",this.setBGCellColorFunc("qans2")):"norinori"===this.owner.pid&&(this.gridcolor=this.gridcolor_LIGHT,this.bcolor="rgb(96, 224, 160)",this.bbcolor="rgb(96, 127, 127)",this.setBGCellColorFunc("qsub1"))},paint:function(){this.drawBGCells(),"lits"===this.owner.pid&&this.drawDotCells(!1),this.drawGrid(),"norinori"===this.owner.pid&&this.drawBlackCells(),this.drawBorders(),this.drawChassis(),"norinori"===this.owner.pid&&this.drawBoxBorders(!1)}},Encode:{decodePzpr:function(b){var c=b===a.URL_PZPRV3&&this.checkpflag("d")||b===a.URL_PZPRAPP&&!this.checkpflag("c");c&&"norinori"!==this.owner.pid?this.decodeLITS_old():this.decodeBorder()},encodePzpr:function(b){b===a.URL_PZPRV3||"norinori"===this.owner.pid?this.encodeBorder():(this.outpflag="c",this.encodeBorder())},decodeKanpen:function(){this.owner.fio.decodeAreaRoom()},encodeKanpen:function(){this.owner.fio.encodeAreaRoom()},decodeLITS_old:function(){for(var a=this.outbstr,b=this.owner.board,c=0;c<b.bdmax;c++){var d=b.border[c],e=d.sidecell[0],f=d.sidecell[1];e.isnull||f.isnull||a.charAt(e.id)==a.charAt(f.id)||(d.ques=1)}this.outbstr=a.substr(b.cellmax)}},FileIO:{decodeData:function(){this.decodeAreaRoom(),this.decodeCellAns()},encodeData:function(){this.encodeAreaRoom(),this.encodeCellAns()},kanpenOpen:function(){this.decodeAreaRoom(),this.decodeCellAns()},kanpenSave:function(){this.encodeAreaRoom(),this.encodeCellAns()}},AnsCheck:{checkBlackCellInArea:function(a,b){return this.checkAllBlock(a,function(a){return a.isBlack()},function(a,c,d){return b(d)})}},"AnsCheck@lits":{checkAns:function(){if(!this.check2x2BlackCell())return"bc2x2";var a=this.owner.board.getRoomInfo();if(!this.checkOverBlackCellInArea(a))return"bkBcGt4";if(!this.checkSeqBlocksInRoom())return"bkBcDivide";if(!this.checkTetromino(a))return"sbSameShape";var b=this.owner.board.getBCellInfo();return this.checkOneArea(b)?this.checkNoBlackCellInArea(a)?this.checkLessBlackCellInArea(a)?null:"bkBcLt4":"bkNoBcell":"bcDivide"},checkOverBlackCellInArea:function(a){return this.checkBlackCellInArea(a,function(a){return 4>=a})},checkLessBlackCellInArea:function(a){return this.checkBlackCellInArea(a,function(a){return a>=4})},checkSeqBlocksInRoom:function(){for(var a=!0,b=this.owner.board,c=1;c<=b.rooms.max;c++){var d=b.rooms.getClist(c).filter(function(a){return a.isBlack()});if(!d.isSeqBlock()){if(this.checkOnly)return!1;d.seterr(1),a=!1}}return a},checkTetromino:function(a){for(var b=this.owner.board.getTetrominoInfo(a),c=!0,d=1;d<=b.max;d++){var e=b.room[d].clist;if(!(e.length<=4)){if(this.checkOnly)return!1;e.seterr(2),c=!1}}return c}},"AnsCheck@norinori":{checkAns:function(){var a=this.owner.board.getBCellInfo();if(!this.checkOverBlackCell(a))return"bcGt2";var b=this.owner.board.getRoomInfo();return this.checkOverBlackCellInArea(b)?this.checkSingleBlackCell(a)?this.checkSingleBlackCellInArea(b)?this.checkNoBlackCellInArea(b)?null:"bkNoBcell":"bkBcLt2":"bcLt2":"bkBcGt2"},checkOverBlackCell:function(a){return this.checkAllArea(a,function(a,b,c){return 2>=c})},checkSingleBlackCell:function(a){return this.checkAllArea(a,function(a,b,c){return c>=2})},checkOverBlackCellInArea:function(a){return this.checkBlackCellInArea(a,function(a){return 2>=a})},checkSingleBlackCellInArea:function(a){return this.checkBlackCellInArea(a,function(a){return 1!=a})}},"FailCode@lits":{bkBcLt4:["黒マスのカタマリが４マス未満の部屋があります。","A room has three or less black cells."],bkBcGt4:["５マス以上の黒マスがある部屋が存在します。","A room has five or more black cells."],sbSameShape:["同じ形のテトロミノが接しています。","Some Tetrominos that are the same shape are Adjacent."]},"FailCode@norinori":{bcLt2:["１マスだけの黒マスのカタマリがあります。","There is a single black cell."],bcGt2:["２マスより大きい黒マスのカタマリがあります。","The size of a mass of black cells is over two."],bkBcLt2:["１マスしか黒マスがない部屋があります。","A room has only one black cell."],bkBcGt2:["２マス以上の黒マスがある部屋が存在します。","A room has three or mode black cells."]}})}();