/*! @license pzpr.js v3.4.0 (c) 2009-2014 sabo2, MIT license
 *   https://bitbucket.org/sabo2/pzprv3 */
pzpr.createCustoms("ichimaga",{MouseEvent:{mouseinput:function(){this.owner.playmode?this.btn.Left?this.mousestart||this.mousemove?this.inputLine():this.mouseend&&this.notInputted()&&this.inputpeke():this.btn.Right&&(this.mousestart||this.mousemove)&&this.inputpeke():this.owner.editmode&&this.mousestart&&this.inputqnum()}},KeyEvent:{enablemake:!0},Cell:{maxnum:4,iscrossing:function(){return this.noNum()}},Board:{hasborder:1},LineManager:{isCenterLine:!0},AreaLineManager:{enabled:!0},Flags:{irowake:!0},Graphic:{hideHatena:!0,initialize:function(){this.Common.prototype.initialize.call(this),this.gridcolor=this.gridcolor_LIGHT,this.fontErrcolor=this.fontcolor,this.fontsizeratio=.85},paint:function(){this.drawDashedCenterLines(),this.drawLines(),this.drawPekes(),this.drawCircles(),this.drawNumbers(),this.drawTarget()},repaintParts:function(a){this.range.cells=a.cellinside(),this.drawCircles(),this.drawNumbers()}},Encode:{decodePzpr:function(){this.decode4Cell(),"ichimaga"===this.owner.pid&&(this.owner.pid=this.checkpflag("m")?"ichimagam":this.checkpflag("x")?"ichimagax":"ichimaga")},encodePzpr:function(){this.encode4Cell()}},FileIO:{decodeData:function(){var a=this.readLine();"ichimaga"===this.owner.pid&&(this.owner.pid="mag"==a?"ichimagam":"cross"==a?"ichimagax":"ichimaga"),this.decodeCellQnum(),this.decodeBorderLine()},encodeData:function(){this.datastr+="ichimagam"===this.owner.pid?"mag\n":"ichimagax"===this.owner.pid?"cross\n":"def\n",this.encodeCellQnum(),this.encodeBorderLine()}},AnsCheck:{checkAns:function(){if(!this.checkLineCount_firefly(3))return"lnBranch";if("ichimagax"!==this.owner.pid&&!this.checkLineCount_firefly(4))return"lnCross";var a=this.getErrorFlag_line();if(!this.checkErrorFlag_line(a,3))return"lcSameNum";if(!this.checkErrorFlag_line(a,2))return"lcCurveGt1";var b=this.owner.board.getLareaInfo();return this.checkOneLine(b)?this.checkErrorFlag_line(a,1)?this.checkOutgoingLine()?this.checkNoLineObject()?null:"nmIsolate":"nmLineNe":"lcDeadEnd":"lcDivided"},checkLineCount_firefly:function(a){return 0==this.owner.board.lines.ltotal[a]?!0:this.checkAllCell(function(b){return b.noNum()&&b.lcnt()==a})},checkNoLineObject:function(){return this.checkAllCell(function(a){return a.isNum()&&0===a.lcnt()})},checkOutgoingLine:function(){return this.checkAllCell(function(a){return a.isValidNum()&&a.getQnum()!==a.lcnt()})},isErrorFlag_line:function(a){var b=a.room[a.max],c=b.ccnt,d=(b.length,b.cells[0]),e=b.cells[1],f=d.getQnum(),g=e.isnull?-1:e.getQnum(),h=0;"ichimagam"===this.owner.pid&&-2!==f&&f===g?h=3:!e.isnull&&c>1?h=2:e.isnull&&(h=1),b.error=h}},FailCode:{nmIsolate:["○から線が出ていません。","A circle doesn't start any line."],nmLineNe:["○から出る線の本数が正しくありません。","The number is not equal to the number of lines out of the circle."],lcSameNum:["同じ数字同士が線で繋がっています。","Same numbers are connected each other."],lcCurveGt1:["線が2回以上曲がっています。","The number of curves is twice or more."]}});