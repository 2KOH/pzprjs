/*! @license pzpr.js v3.4.0 (c) 2009-2014 sabo2, MIT license
 *   https://bitbucket.org/sabo2/pzprv3 */
pzpr.createCustoms("shikaku",{MouseEvent:{mouseinput:function(){this.owner.playmode?(this.mousestart||this.mousemove)&&(this.btn.Left&&this.isBorderMode()?this.inputborder():this.inputQsubLine()):this.owner.editmode&&this.mousestart&&this.inputqnum()}},KeyEvent:{enablemake:!0},Board:{hasborder:1},AreaRoomManager:{enabled:!0},Graphic:{hideHatena:!0,initialize:function(){this.Common.prototype.initialize.call(this),this.gridcolor=this.gridcolor_DLIGHT,this.fontcolor=this.fontErrcolor="white",this.setBorderColorFunc("qans"),this.fontsizeratio=.85,this.circleratio=[.4,.4]},paint:function(){this.drawBGCells(),this.drawDashedGrid(),this.drawBorders(),this.drawCircles(),this.drawNumbers(),this.drawBorderQsubs(),this.drawChassis(),this.drawTarget()},getCircleStrokeColor:function(){return null},getCircleFillColor:function(a){return-1!==a.qnum?1===a.error?this.errcolor1:this.cellcolor:null}},Encode:{decodePzpr:function(){this.decodeNumber16()},encodePzpr:function(){this.encodeNumber16()},decodeKanpen:function(){this.owner.fio.decodeCellQnum_kanpen()},encodeKanpen:function(){this.owner.fio.encodeCellQnum_kanpen()}},FileIO:{decodeData:function(){this.decodeCellQnum(),this.decodeBorderAns()},encodeData:function(){this.encodeCellQnum(),this.encodeBorderAns()},kanpenOpen:function(){this.decodeCellQnum_kanpen(),this.decodeAnsSquareRoom()},kanpenSave:function(){this.encodeCellQnum_kanpen(),this.encodeAnsSquareRoom()}},AnsCheck:{checkAns:function(){var a=this.owner.pid,b=this.owner.board.getRoomInfo();if(!this.checkNoNumber(b))return"bkNoNum";if(!this.checkDoubleNumber(b))return"bkNumGe2";if("shikaku"===a){if(!this.checkAreaRect(b))return"bkNotRect"}else if("aho"===a){if(!this.checkAhoSquare(b))return"bkNotRect3";if(!this.checkLshapeArea(b))return"bkNotLshape3"}return this.checkNumberAndSize(b)?this.checkBorderCount(1,0)?null:"bdDeadEnd":"bkSizeNe"},checkAhoSquare:function(a){return this.checkAllArea(a,function(a,b,c,d){return 0>d||d%3===0||a*b===c})},checkLshapeArea:function(a){for(var b=!0,c=1;c<=a.max;c++){var d=a.room[c].clist,e=d.getQnumCell();if(!e.isnull){var f=e.getQnum();if(!(0>f||f%3!==0)){var g=d.getRectSize(),h=this.owner.board.cellinside(g.x1,g.y1,g.x2,g.y2).filter(function(b){return a.getRoomID(b)!==c}),i=h.getRectSize();if(0===h.length||i.cols*i.rows!=i.cnt||g.x1!==i.x1&&g.x2!==i.x2||g.y1!==i.y1&&g.y2!==i.y2){if(this.checkOnly)return!1;d.seterr(1),b=!1}}}}return b}},FailCode:{bkNoNum:["数字の入っていない領域があります。","An area has no numbers."],bkNumGe2:["1つの領域に2つ以上の数字が入っています。","An area has plural numbers."],bkSizeNe:["数字と領域の大きさが違います。","The size of the area is not equal to the number."],bkNotRect:["四角形ではない領域があります。","An area is not rectangle."],bkNotRect3:["大きさが3の倍数ではないのに四角形ではない領域があります。","An area whose size is not multiples of three is not rectangle."],bkNotLshape3:["大きさが3の倍数である領域がL字型になっていません。","An area whose size is multiples of three is not L-shape."]}});