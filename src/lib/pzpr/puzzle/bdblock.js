/*! @license pzpr.js v3.4.0 (c) 2009-2014 sabo2, MIT license
 *   https://bitbucket.org/sabo2/pzprv3 */
pzpr.createCustoms("bdblock",{MouseEvent:{mouseinput:function(){this.owner.playmode?(this.mousestart||this.mousemove)&&(this.btn.Left&&this.isBorderMode()?this.inputborder():this.inputQsubLine()):this.owner.editmode&&(this.mousestart?this.inputcrossMark():this.mouseend&&this.notInputted()&&this.inputqnum())}},KeyEvent:{enablemake:!0},Board:{hascross:2,hasborder:1},AreaRoomManager:{enabled:!0},Graphic:{initialize:function(){this.Common.prototype.initialize.call(this),this.setBorderColorFunc("qans"),this.gridcolor=this.gridcolor_DLIGHT,this.borderQanscolor="black",this.crosssize=.15},paint:function(){this.drawBGCells(),this.drawDashedGrid(),this.drawBorders(),this.drawNumbers(),this.drawCrossMarks(),this.drawBorderQsubs(),this.drawChassis(),this.drawTarget()}},Encode:{decodePzpr:function(){this.decodeCrossMark(),this.outbstr=this.outbstr.substr(1),this.decodeNumber16()},encodePzpr:function(){this.encodeCrossMark(),this.outbstr+="/",this.encodeNumber16()}},FileIO:{decodeData:function(){this.decodeCellQnum(),this.decodeCrossNum(),this.decodeBorderAns()},encodeData:function(){this.encodeCellQnum(),this.encodeCrossNum(),this.encodeBorderAns()}},AnsCheck:{checkAns:function(){if(!this.checkBorderCount(3,2))return"bdBranchExBP";if(!this.checkBorderCount(4,2))return"bdCrossExBP";var a=this.owner.board.getRoomInfo();return this.checkNoNumber(a)?this.checkDiffNumberInBlock(a)?this.checkGatheredObject(a)?this.checkBorderCount(1,0)?this.checkBorderCount(2,1)?this.checkBorderCount(0,1)?null:"bdIgnoreBP":"bdCountLt3BP":"bdDeadEnd":"bkSepNum":"bkPlNum":"bkNoNum"},checkDiffNumberInBlock:function(a){return this.checkSameObjectInRoom(a,function(a){return a.getNum()})},checkGatheredObject:function(a){for(var b=[],c=0,d=[],e=this.owner.board,f=0;f<e.cellmax;f++)d[f]=e.cell[f].getNum(),c<d[f]&&(c=d[f]);for(var g=0;c>=g;g++)b[g]=-1;for(var f=0;f<e.cellmax;f++)if(-1!==d[f])if(-1===b[d[f]])b[d[f]]=a.id[f];else if(b[d[f]]!==a.id[f])return e.cell.filter(function(c){return a.id[f]===a.id[c.id]||b[d[f]]===a.id[c.id]}).seterr(1),!1;return!0}},FailCode:{bdBranchExBP:["黒点以外のところで線が分岐しています。","Lines are branched out of the black point."],bdCrossExBP:["黒点以外のところで線が交差しています。","Lines are crossed out of the black point."],bdCountLt3BP:["黒点から線が３本以上出ていません。","A black point has two or less lines."],bdIgnoreBP:["黒点上を線が通過していません。","A black point has no line."]}});